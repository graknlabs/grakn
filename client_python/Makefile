
init:
	pip3 install pipenv
	pipenv install --dev


grpcgen:
	bazel build //client_python:generated_py_lib
	rsync --chmod=u+rwx -a ../bazel-genfiles/client_python/generated_py_lib//grakn/ grakn/

	# delete copied proto files
	rm grakn/service/Keyspace/autogenerated/*.proto
	rm grakn/service/Session/autogenerated/*.proto

test:
	grakn server start
	bazel test //client_python:integration_tests --force_python PY3 --python_path `which python3`

clean:
	rm -rf grakn/service/Keyspace/autogenerated
	rm -rf grakn/service/Session/autogenerated
