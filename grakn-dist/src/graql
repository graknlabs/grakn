#!/bin/bash

if [ -z "${GRAKN_HOME}" ]; then
    [[ $(readlink $0) ]] && path=$(readlink $0) || path=$0
    GRAKN_BIN=$(cd "$(dirname "${path}")" && pwd -P)
    GRAKN_HOME=$(cd "${GRAKN_BIN}" && pwd -P)
fi

case "$1" in
  migrate)
    "${GRAKN_HOME}/services/migration.sh" "${@:2}"
    ;;

  help)
    case "$2" in
      migrate)
        echo ""
        ;;

      *)
        echo "
Usage:
  graql            Starts a REPL console for running Graql queries. Defaults to connecting to localhost
  graql [command]  Initiates other functionalities depending on the command

Available commands:
  migrate  Runs migration from a file
  help     Prints this message"
        ;;
    esac
    ;;

  *)
    "${GRAKN_HOME}/services/graql.sh" $@
    ;;
esac
